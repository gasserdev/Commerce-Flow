<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBQzMGrl9Twu0euqiU_39DkKjreWlFD6Ok",
    authDomain: "commerceflow-b742b.firebaseapp.com",
    projectId: "commerceflow-b742b",
    storageBucket: "commerceflow-b742b.firebasestorage.app",
    messagingSenderId: "159750863802",
    appId: "1:159750863802:web:926e046a4209d887917b83",
    measurementId: "G-MT0L31KE13"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  window.auth = auth;
  window.signInWithEmailAndPassword = signInWithEmailAndPassword;
</script>



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="log.css">
</head>
<body>
    <div class="all">
        <div class="form">
            <form action="" id="myform">
                <div class="head">
                   <img src="rocket.png" alt="">
                    <h1>CommerceFlow</h1>
                </div>
                <div class="contant">
                    <h2>Welcome Back</h2>
                    <p>Login to your account to continue </p>
                </div>

                <label for="email">Email</label>
                <input type="email" placeholder="john.deo@example.com" id="email" name="email" autocomplete="email">

                <label for="pass">Password</label>
                <input type="password" id="pass" placeholder="********" name="pass" autocomplete="current-password">

                <div class="done">
                    <div class="left">
                        <input type="checkbox" id="check">
                        <label for="check">Remember me</label>
                    </div>
                    <div class="right">
                        <a href="#">Forget Password?</a>
                    </div>
                </div>

                <button type="submit" id="btn">Login</button>
                <div id="error" style="color:red; margin-top:10px; display:none;"></div>

                <p>Don't have an account? <a href="#">Register</a></p>
            </form>
        </div>
        <div class="photo">
            <img src="6aac3147719b13bfabe4f38224e54228613e609c0dd1012c920c344fc75.png" alt="">
        </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function() {
        const btn = document.getElementById("btn");
        const emailInput = document.getElementById("email");
        const passwordInput = document.getElementById("pass");
        const errorDiv = document.getElementById("error");
        const checkBox = document.getElementById("check");

    btn.addEventListener("click", async function(event) {
        event.preventDefault();

        const email = emailInput.value.trim();
        const password = passwordInput.value.trim();

        if (email.indexOf("@") === -1 || email.indexOf(".") === -1) {
            errorDiv.textContent = "Please enter a correct Email";
            errorDiv.style.display = "block";
            return;
        }
        if (email.indexOf("@") === 0) {
            errorDiv.textContent = "Email cannot start with @";
            errorDiv.style.display = "block";
            return;
        }
        if (email.indexOf(" ") !== -1) {
            errorDiv.textContent = "Email cannot contain spaces";
            errorDiv.style.display = "block";
            return;
        }

        if (password.length < 8) {
            errorDiv.textContent = "Password must be at least 8 characters";
            errorDiv.style.display = "block";
            return;
        }
        if (!/[0-9]/.test(password)) {
            errorDiv.textContent = "Password must contain at least one number";
            errorDiv.style.display = "block";
            return;
        }
        if (!/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
            errorDiv.textContent = "Password must contain at least one special character";
            errorDiv.style.display = "block";
            return;
        }
        if (!checkBox.checked) {
            errorDiv.textContent = "You must agree to the terms";
            errorDiv.style.display = "block";
            return;
        }

        errorDiv.style.display = "none";

        // ---------- FIREBASE LOGIN ----------
        try {
            const userCredential = await signInWithEmailAndPassword(auth, email, password);

            alert("Successfully logged in ðŸŽ‰");
            window.location.href = "home.html";

        } catch (error) {
            errorDiv.textContent = error.message;
            errorDiv.style.display = "block";
        }
    });
});
    </script>
</body>
</html>
